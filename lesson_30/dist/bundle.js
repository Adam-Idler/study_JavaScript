(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.deadlineDate=e}var n,o;return n=t,(o=[{key:"countTimer",value:function(){var e=this,t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),r=setInterval(a,1e3);function a(){var a,c,i,l=(a=(new Date(e.deadlineDate).getTime()-(new Date).getTime())/1e3,c=Math.floor(a%60),i=Math.floor(a/60%60),{timeRemaining:a,hours:Math.floor(a/3600)%24,minutes:i,seconds:c});l.timeRemaining>0?(t.textContent=String(l.hours).replace(/^\w$/,"0"+l.hours),n.textContent=String(l.minutes).replace(/^\w$/,"0"+l.minutes),o.textContent=String(l.seconds).replace(/^\w$/,"0"+l.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(r))}a()}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o;return t=e,(o=[{key:"toggleMenu",value:function(){document.querySelector(".menu");var e=document.querySelector("menu");document.addEventListener("click",(function(t){var n=t.target;n.closest("menu")||e.classList.remove("active-menu"),("A"===n.tagName&&n.closest(".active-menu")||n.closest(".menu"))&&e.classList.toggle("active-menu")}))}}])&&n(t.prototype,o),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"togglePopUp",value:function(){var e,t=document.querySelector(".popup"),n=document.querySelectorAll(".popup-btn"),o=-100,r=0;function a(){r=10,o<=-5?(o+=r,t.style.transform="translate(".concat(o,"%)"),e=requestAnimationFrame(a)):(r=0,cancelAnimationFrame(e))}function c(){r=-10,o>=-95?(o+=r,t.style.transform="translate(".concat(o,"%)"),e=requestAnimationFrame(c)):(r=0,cancelAnimationFrame(e))}t.style.display="block",t.style.transform="translate(".concat(o,"%)"),n.forEach((function(n){n.addEventListener("click",(function(){window.screen.width>768?e=requestAnimationFrame(a):t.style.transform="translate(0%)"}))})),t.addEventListener("click",(function(n){var o=n.target,r=!!o.classList.contains("popup-close");(o=o.closest(".popup-content"))&&!r||(window.screen.width>768?e=requestAnimationFrame(c):t.style.transform="translate(-100%)")}))}}])&&r(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"scrollTo",value:function(){for(var e=document.querySelectorAll('a[href^="#"]'),t=function(t){e[t].addEventListener("click",(function(n){n.preventDefault();var o=e[t].getAttribute("href");n.target.classList.contains("close-btn")||document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))},n=0;n<7;n++)t(n)}}])&&c(t.prototype,n),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"activateTabs",value:function(){var e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(function(e){var o=e.target;(o=o.closest(".service-header-tab"))&&t.forEach((function(e,r){e===o&&function(e){for(var o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))}(r)}))}))}}])&&l(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"sliderActivate",value:function(){for(var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=t.querySelector(".portfolio-dots"),o=e.length,r=0;r<o;r++){var a=document.createElement("li");n.insertBefore(a,n.lastChild),a.classList.add("dot")}var c,i=n.querySelectorAll(".dot"),l=0,u=function(e,t,n){return e[t].classList.remove(n)},s=function(e,t,n){return e[t].classList.add(n)},f=function(){u(e,l,"portfolio-item-active"),u(i,l,"dot-active"),++l>=e.length&&(l=0),s(i,l,"dot-active"),s(e,l,"portfolio-item-active")},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;c=setInterval(f,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(u(e,l,"portfolio-item-active"),u(i,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&i.forEach((function(e,t){e===n&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),s(i,l,"dot-active"),s(e,l,"portfolio-item-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(c)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&v()})),v(1500)}}])&&s(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"photoChange",value:function(){var e,t=document.querySelector("#command>.container>.row");t.addEventListener("mouseover",(function(t){var n=t.target;e=n.src,n.src=n.dataset.img,n.dataset.img=e})),t.addEventListener("mouseout",(function(t){var n=t.target;n.dataset.img=n.src,n.src=e,e=n.src}))}}])&&v(t.prototype,n),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.calcBlock=document.querySelector(".calc-block"),this.textForm=document.querySelectorAll("form")}var t,n;return t=e,(n=[{key:"init",value:function(){this.validateCalc(),this.validateInputText(),maskPhone(".form-phone","____ ___-__-__"),document.querySelectorAll(".form-email").forEach((function(e){return e.setAttribute("required",!0)})),document.querySelector(".mess").setAttribute("required",!0),document.querySelectorAll(".form-name").forEach((function(e){e.onblur=function(e){e.target.value.length<2&&(e.target.value="")}})),document.getElementById("form2-name").onblur=function(e){return e.target.value.length<2?e.target.value="":""}}},{key:"validateCalc",value:function(){this.calcBlock.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^\d\.]/,"")}))}},{key:"validateInputText",value:function(){this.textForm.forEach((function(e){e.addEventListener("input",(function(e){var t=e.target;(t.classList.contains("form-name")||"form2-name"===t.id)&&(t.value=t.value.replace(/[^а-яё\s]{2,15}/i,"")),t.classList.contains("form-email")&&(t.value=t.value.replace(/[а-яё\s,\#\$\%\/|\\\[\]\{\}&\`\~?!*\(\)\+\=\^\:\;\'\"]/i,"")),t.classList.contains("mess")&&(t.value=t.value.replace(/[a-z]/i,""))}))}))}}])&&d(t.prototype,n),e}();function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.price=t}var t,n;return t=e,(n=[{key:"calc",value:function(){var e=this,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total");t.addEventListener("change",(function(t){var i=t.target;(i.matches("select")||i.matches("input"))&&function(){var t=0,i=1,l=1,u=n.options[n.selectedIndex].value,s=+o.value;a.value>1&&(i+=(a.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),u&&s&&(t=Math.ceil(e.price*u*s*i*l));var f,v=+c.textContent;f=setInterval((function(){0===t?(c.textContent=0,clearInterval(f)):v<t?(v+=100,c.textContent=v):v>t&&(v-=100,c.textContent=v),t-c.textContent<150&&t-c.textContent>0&&(c.textContent=t,clearInterval(f))}),5)}()}))}}])&&p(t.prototype,n),e}();function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorMessage="Что-то пошло не так...",this.loadMessage="Загрузка...",this.successMessage="Спасибо! Мы скоро с вами свяжимся!",this.forms=document.querySelectorAll("form")}var t,n;return t=e,(n=[{key:"postData",value:function(e,t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"sendAjax",value:function(){var e=this,t=document.createElement("div");t.style.cssText="\n            font-size: 2rem;\n            color: #fff;\n    ",this.forms.forEach((function(n){n.addEventListener("submit",(function(o){o.preventDefault(),n.appendChild(t),t.textContent=e.loadMessage;var r=new FormData(n),a={};r.forEach((function(e,t){a[t]=e})),e.postData(n,a).then((function(n){if(200!==n.status)throw new Error("status network not 200");t.textContent=e.successMessage})).catch((function(n){t.textContent=e.errorMessage,console.error(n)})),n.reset()}))}))}}])&&g(t.prototype,n),e}();new t("31 dec 2020").countTimer(),(new o).toggleMenu(),(new a).togglePopUp(),(new i).scrollTo(),(new u).activateTabs(),(new f).sliderActivate(),(new m).photoChange(),(new h).init(),new y(100).calc(),(new b).sendAjax()})();